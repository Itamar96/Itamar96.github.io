/* =========================================================
   Iridescent Cinderwyrm â€” Default CSS
   - Single shared stylesheet for all pages
   - Accessible, responsive, and themable
   - Works with either:
       1) document.documentElement.setAttribute('data-theme', 'dark'|'light')
       2) body.dark-theme class (legacy support)
   ========================================================= */

/* -------------------- CSS Custom Properties -------------------- */
:root {
  /* Base palette */
  --bg-grad-1: #F7EAD9;
  --bg-grad-2: #F7EAD9;
  --bg-grad-3: #F7EAD9;
  --surface: #FFFFFF;
  --text: #2F3A34;
  --accent: #6F8F6B;       /* primary buttons */
  --accent-deep: #3E574B;  /* links / headings accent */
  --accent-soft: #8DA3A6;  /* subtle UI */
  --holiday-cream: #FFF8DC;
  --holiday-gold: #D4AF37;
  --holiday-pine: #2F6F4F;
  --holiday-berry: #B8403A;
  --radius: 14px;
  --radius-sm: 10px;
  --shadow: 0 8px 30px rgba(47, 58, 52, 0.12);
  --shadow-soft: 0 6px 18px rgba(47, 58, 52, 0.10);
  --content-width: 960px;

  /* Spacing scale */
  --space-1: .25rem;
  --space-2: .5rem;
  --space-3: .75rem;
  --space-4: 1rem;
  --space-5: 1.25rem;
  --space-6: 1.5rem;
  --space-8: 2rem;
  --space-10: 2.5rem;

  /* Typography */
  --font-sans: "Inter", system-ui, -apple-system, Segoe UI, Roboto, sans-serif;
  --font-serif: "Playfair Display", Georgia, serif;
}

/* Dark theme via data attribute */
:root[data-theme="dark"] {
  --bg-grad-1: #1E1E1E;
  --bg-grad-2: #1E1E1E;
  --bg-grad-3: #121212;
  --surface: #1E1E1E;
  --text: #E4E4E4;
  --accent: #8FCB9B;
  --accent-deep: #B6E0B9;
  --accent-soft: #A7C7C2;
}

/* Dark theme legacy support: body.dark-theme */
body.dark-theme {
  --bg-grad-1: #1E1E1E;
  --bg-grad-2: #1E1E1E;
  --bg-grad-3: #121212;
  --surface: #1E1E1E;
  --text: #E4E4E4;
  --accent: #8FCB9B;
  --accent-deep: #B6E0B9;
  --accent-soft: #A7C7C2;
}

/* -------------------- Global / Page -------------------- */
html { scroll-behavior: smooth; }

body {
  margin: 0;
  font-family: var(--font-sans);
  color: var(--text);
  line-height: 1.6;
  background: linear-gradient(var(--bg-grad-1), var(--bg-grad-2), var(--bg-grad-3));
  /* Use a relative path for GH Pages-friendly backgrounds; adjust if needed */
  background-image: url("images/spa-bg.svg");
  background-size: cover;
  background-repeat: no-repeat;
  background-attachment: fixed;
  background-position: center;
}

/* Respect reduced motion */
@media (prefers-reduced-motion: reduce) {
  html { scroll-behavior: auto; }
  * { animation: none !important; transition: none !important; }
}

/* Layout containers */
.container {
  max-width: var(--content-width);
  margin-inline: auto;
  padding: 0 var(--space-4);
  box-sizing: border-box;
}

header.site-header, main, footer.site-footer {
  padding-block: var(--space-6);
}

header.site-header {
  background: var(--surface);
  text-align: center;
  box-shadow: var(--shadow-soft);
}

/* Skip link for keyboard users */
.skip-link {
  position: absolute;
  left: -9999px;
  top: auto;
  width: 1px;
  height: 1px;
  overflow: hidden;
}
.skip-link:focus {
  position: fixed;
  left: var(--space-4);
  top: var(--space-4);
  width: auto;
  height: auto;
  padding: var(--space-3) var(--space-4);
  background: var(--surface);
  color: var(--accent-deep);
  border-radius: var(--radius-sm);
  box-shadow: var(--shadow);
  z-index: 1000;
}

/* -------------------- Typography -------------------- */
.site-title { margin: 0; line-height: 1.2; }
.site-title .line-1 { display: block; font-family: var(--font-serif); font-size: clamp(1.8rem, 1.1rem + 2.2vw, 2.4rem); font-weight: 800; color: var(--accent-deep); }
.site-title .line-2 { display: block; font-family: var(--font-serif); font-weight: 700; color: var(--accent-deep); }
.dragon { margin-left: .25ch; }

h1, h2, h3 { font-family: var(--font-serif); line-height: 1.2; color: var(--accent-deep); }
h2 { font-size: clamp(1.3rem, 1.05rem + 1.2vw, 1.9rem); font-weight: 700; margin: var(--space-6) 0 var(--space-4); }
h3 { font-size: 1.15rem; font-weight: 700; margin: var(--space-5) 0 var(--space-3); }

p { margin: 0 0 var(--space-4); }
.small { font-size: .9rem; }
.muted { color: var(--accent-soft); }
.note-gold { color: var(--holiday-gold); }
.highlight-name { background: linear-gradient(90deg, rgba(212,175,55,0.15), transparent); padding: 0 .25rem; border-radius: 6px; }

/* Lists */
ul, ol { margin-block: var(--space-4); padding-left: 1.25rem; }
ul ul, ol ol { margin-top: var(--space-2); }

/* -------------------- Navigation -------------------- */
.primary-nav, .footer-links { list-style: none; padding: 0; margin: var(--space-4) 0 0; display: flex; flex-wrap: wrap; justify-content: center; gap: var(--space-2) var(--space-4); }

.primary-nav a, .footer-links a {
  color: var(--accent-deep);
  text-decoration: none;
  padding: 0.4rem 0.75rem;
  border-radius: 999px;
  transition: background-color 160ms ease, transform 120ms ease, color 120ms ease;
}
.primary-nav a:hover, .primary-nav a:focus { background: rgba(62,87,75,.08); transform: translateY(-1px); text-decoration: underline; }
.primary-nav a[aria-current="page"] { background: var(--accent); color: #fff; font-weight: 600; box-shadow: 0 0 0 2px rgba(62,87,75,.08) inset, var(--shadow); }

/* -------------------- Buttons -------------------- */
.btn { padding: .55rem .95rem; border-radius: 999px; font-weight: 600; border: none; cursor: pointer; box-shadow: var(--shadow); }
.btn-brand { background: var(--accent); color: #fff; }
.btn-brand:hover { background: var(--accent-deep); }

/* Focus styles */
:where(a, button, input, select, textarea, summary):focus-visible {
  outline: 3px solid var(--accent);
  outline-offset: 2px;
  border-radius: 8px;
}

/* -------------------- Forms -------------------- */
.form-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(220px, 1fr)); gap: var(--space-4); align-items: end; }
.field label { display: inline-block; margin-bottom: .35rem; font-weight: 600; color: var(--accent-deep); }
.field input { width: 100%; padding: .6rem .7rem; border-radius: 10px; border: 1px solid rgba(62,87,75,.20); box-shadow: 0 1px 0 rgba(0,0,0,.02) inset; background: #fff; color: var(--text); }
.field input:focus { border-color: var(--accent); box-shadow: 0 0 0 4px rgba(111,143,107,.20); }
.actions { margin-top: .25rem; }

/* -------------------- Media / Figures -------------------- */
figure { background: #fff; border-radius: var(--radius); padding: var(--space-4); box-shadow: var(--shadow); border: 1px solid rgba(62,87,75,.12); text-align: center; margin: var(--space-6) auto; }
figure img { max-width: 100%; height: auto; border-radius: 12px; box-shadow: 0 8px 24px rgba(47,58,52,.12); }
figcaption { margin-top: .75rem; font-size: .95rem; color: var(--accent-deep); }
.img-gold-border { outline: 3px solid var(--holiday-gold); outline-offset: -3px; border-radius: 12px; }

/* Pull quote */
.pull-quote blockquote { padding: var(--space-4); border-left: 4px solid var(--accent); background: rgba(141,163,166,.10); border-radius: 0 var(--radius) var(--radius) 0; margin: var(--space-4) 0; }
.pull-quote figcaption { margin-top: var(--space-2); font-style: italic; }

/* -------------------- Brand Guide components -------------------- */
.swatches { list-style: none; padding: 0; display: grid; grid-template-columns: repeat(auto-fit, minmax(220px, 1fr)); gap: var(--space-4); }
.swatch { display: grid; grid-template-columns: 56px 1fr; align-items: center; gap: var(--space-3); padding: var(--space-3); border: 1px solid rgba(62,87,75,.12); border-radius: var(--radius-sm); background: var(--surface); box-shadow: var(--shadow-soft); }
.color-box { width: 56px; height: 40px; border-radius: 10px; box-shadow: inset 0 0 0 1px rgba(0,0,0,.08); }
.type-card { background: var(--surface); border: 1px solid rgba(62,87,75,.12); border-radius: var(--radius); padding: var(--space-4); box-shadow: var(--shadow-soft); margin-bottom: var(--space-4); }
.type-label { font-weight: 600; color: var(--accent-deep); margin-bottom: var(--space-3); }
.demo-h1 { font-family: var(--font-serif); font-size: clamp(1.6rem, 1.2rem + 1.8vw, 2.2rem); margin: 0 0 var(--space-2); }
.demo-h2 { font-family: var(--font-serif); font-size: clamp(1.2rem, 1rem + 1.1vw, 1.6rem); margin: 0; }

/* -------------------- Footer -------------------- */
footer.site-footer { border-top: 4px solid var(--accent); background: var(--bg-grad-1); text-align: center; }
footer .meta { font-size: .9rem; color: var(--accent); font-style: italic; }

/* -------------------- Utilities -------------------- */
.text-gold { color: var(--holiday-gold); }
.meta { color: var(--accent-soft); }

/* -------------------- Responsive tweaks -------------------- */
@media (max-width: 768px) {
  body { background-attachment: scroll; }
}

/* -------------------- Dark Theme element fixes -------------------- */
:root[data-theme="dark"] body,
body.dark-theme {
  background-image: none; /* quieter dark */
  background-color: var(--bg-grad-1);
}

:root[data-theme="dark"] header.site-header,
:root[data-theme="dark"] main,
:root[data-theme="dark"] footer.site-footer,
body.dark-theme header.site-header,
body.dark-theme main,
body.dark-theme footer.site-footer {
  background: var(--surface);
  color: var(--text);
}

:where(:root[data-theme="dark"], body.dark-theme) :is(h1,h2,h3,p,figcaption,cite,blockquote) {
  color: var(--text);
}

:where(:root[data-theme="dark"], body.dark-theme) .primary-nav a { color: var(--accent-deep); }
:where(:root[data-theme="dark"], body.dark-theme) .primary-nav a:hover,
:where(:root[data-theme="dark"], body.dark-theme) .primary-nav a:focus { background: rgba(255,255,255,.08); color: var(--accent); }
:where(:root[data-theme="dark"], body.dark-theme) .primary-nav a[aria-current="page"] { background: var(--accent); color: #1E1E1E; }

:where(:root[data-theme="dark"], body.dark-theme) figure { background: var(--surface); border-color: rgba(255,255,255,.15); }
:where(:root[data-theme="dark"], body.dark-theme) blockquote { background: rgba(255,255,255,.05); border-left-color: var(--accent); }

:where(:root[data-theme="dark"], body.dark-theme) .btn-brand { background: var(--accent); color: #1E1E1E; }
:where(:root[data-theme="dark"], body.dark-theme) .btn-brand:hover { background: var(--accent-deep); }

