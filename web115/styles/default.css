html { box-sizing: border-box; }
*, *::before, *::after { box-sizing: inherit; }

:root {
  --bg-base: #F7EAD9;
  --bg-grad-1: var(--bg-base);
  --bg-grad-2: var(--bg-base);
  --bg-grad-3: var(--bg-base);
  --surface: #FFFFFF;
  --text: #2F3A34;
  --accent: #5E7D62;
  --clay-glow: #B85B39;
  --accent-deep: #365746;
  --accent-soft: #92ABA6;
  --holiday-gold: #C9A84D;
  /* slightly lighter header gold for the site title (subtle, not too bright) */
  --header-gold: #DDB955;
  --holiday-cream: #FFF7E2;
  --holiday-gold-rgb: 201, 168, 77;

  --palette-sand: var(--bg-grad-1);
  --palette-surface: var(--surface);
  --palette-text: var(--text);
  --palette-accent: var(--accent);
  --palette-accent-deep: var(--accent-deep);
  --palette-mist: var(--accent-soft);
  --palette-clay: var(--clay-glow);
  --palette-holiday-cream: var(--holiday-cream);
  --palette-gold: var(--holiday-gold);

  --brand-heading: "Playfair Display", serif;
  --brand-body: "Inter", sans-serif;

  --content-width: 960px;
  --space-2: 0.5rem;
  --space-4: 1rem;
  --space-6: 1.5rem;
  --radius: 14px;
  --shadow: 0 10px 36px rgba(33, 36, 32, 0.10);
  --site-divider: rgba(var(--accent-deep-rgb), 0.08);
  --accent-rgb: 94, 125, 98;
  --accent-deep-rgb: 54, 87, 70;
  --text-rgb: 47, 58, 52;
  --focus-ring: rgba(var(--accent-rgb), 0.18);
  --bg-overlay-rgb: 245, 241, 236;
  --bg-overlay-strength: 0.06;
}

html, body { height: 100%; }
body {
  margin: 0;
  font-family: var(--brand-body);
  color: var(--text);
  line-height: 1.6;
  background:
    linear-gradient(rgba(var(--bg-overlay-rgb), var(--bg-overlay-strength)), rgba(var(--bg-overlay-rgb), var(--bg-overlay-strength))),
    linear-gradient(var(--bg-grad-1), var(--bg-grad-2), var(--bg-grad-3)),
    url("images/spa-bg.svg");
  background-size: cover;
  background-repeat: no-repeat;
  background-attachment: fixed;
  background-position: center;
}

body::after {
  content: '';
  position: fixed;
  inset: 0;
  pointer-events: none;
  background: radial-gradient(1200px 600px at 50% 15%, rgba(0,0,0,0.03), transparent 40%), linear-gradient(transparent, rgba(0,0,0,0.01));
  mix-blend-mode: multiply;
  opacity: 0.32;
}

main { max-width: var(--content-width); margin: 0 auto; padding: 0 var(--space-4); }

/* Align main content for better reading rhythm:
   - Keep header/site title and nav centered for branding
   - Left-align article content inside the centered column on larger screens
   - Keep images/figures centered on small screens for balance
*/
@media (min-width: 720px) {
  main, [data-container] { text-align: left; }
  main h1, main h2, main h3, main h4, main h5, main h6,
  main p, main ul, main ol, main blockquote, main figure, main section {
    margin-left: 0;
    margin-right: 0;
  }

  /* Keep the site title and nav visually centered (they are in header) */
  header { text-align: center; }

  /* Figures: align to start (left) within the content column on larger screens */
  main figure, [data-container] figure { margin-left: 0; margin-right: 0; }
}

@media (max-width: 719px) {
  /* On small screens keep centered flow for ease of scanning */
  main, [data-container] { text-align: center; }
  main figure, [data-container] figure { margin-left: auto; margin-right: auto; }
}

/* Normalize spacing + padding for consistent rhythm across pages */
/* Headings should not add unexpected top gaps — spacing controlled by flow */
main h1, main h2, main h3, main h4, main h5, main h6 {
  margin-top: 0;
  margin-bottom: var(--space-4);
  line-height: 1.15;
}

/* Explicit, consistent heading scale inside the main column */
main h1 { font-size: clamp(2rem, 2.5vw + 0.75rem, 3rem); font-weight: 800; }
main h2 { font-size: clamp(1.35rem, 1.6vw + 0.6rem, 1.8rem); font-weight: 700; }
main h3 { font-size: clamp(1.05rem, 1.1vw + 0.4rem, 1.25rem); font-weight: 600; }

/* Body copy and lists share the same bottom rhythm */
main p, main ul, main ol {
  margin: 0 0 var(--space-4);
  padding: 0;
}

/* Blockquotes keep their visual treatment but follow the same vertical rhythm */
main blockquote { margin: 0 0 var(--space-4); padding: 1rem 1.25rem; }

/* Keep figure cards visually consistent: padding and caption alignment
   On wide screens captions align left with the text column; on small screens stay centered */
figure { padding: var(--space-4); }
@media (min-width: 720px) { figure { text-align: left; } figcaption { text-align: left; } }

/* Ensure lists have consistent left padding in the content column on wide screens */
@media (min-width: 720px) {
  main ul, main ol { padding-left: 1.25rem; }
}

header {
  padding: calc(var(--space-4) + 0.5rem) 0;
  text-align: center;
  background: var(--surface);
  border-bottom: 1px solid var(--site-divider);
}

[data-site-title] { font-family: var(--brand-heading); }
[data-site-title] {
  font-weight: 800;
  font-size: clamp(1.8rem, 1.1rem + 2.2vw, 2.4rem);
  margin: 0;
  /* Use the theme variable for a solid gold site title color. */
  /* Ensure no gradient or background-clip is applied and force a single color */
  background: none !important;
  -webkit-background-clip: initial !important;
  background-clip: initial !important;
  color: var(--holiday-gold) !important;
  opacity: 1;
  text-shadow: none !important;
}

/* Also ensure any inline or nested spans cannot apply the old text-clip gradient */
[data-site-title] * {
  background: none !important;
  -webkit-background-clip: initial !important;
  background-clip: initial !important;
  color: inherit !important;
  text-shadow: none !important;
}

[data-site-title], [data-page-title], [data-section-title] { font-family: var(--brand-heading); line-height: 1.2; margin: 0 0 var(--space-4); }
[data-site-title] { font-weight: 800; }
[data-page-title] { font-weight: 700; }
[data-section-title] { font-weight: 700; font-size: 1.15rem; }

nav { display: flex; flex-wrap: wrap; justify-content: center; gap: .5rem 1rem; margin-top: .5rem; }
nav a { color: var(--accent-deep); text-decoration: none; padding: .4rem .75rem; border-radius: 999px; transition: background-color 160ms ease, transform 120ms ease; font-weight: 400; }
nav a:hover, nav a:focus-visible { text-decoration: underline; background: rgba(var(--accent-deep-rgb), 0.08); transform: translateY(-1px); }
/* Subtle green hue on hover to give a warm accent */
nav a:hover, nav a:focus-visible { background: linear-gradient(180deg, rgba(144,181,154,0.06), rgba(144,181,154,0.03)); }
/* Keep nav items visually uniform (do not bold the current page link). Force stronger specificity to counter inline or template-level bolding */
nav a[aria-current="page"], nav a[aria-current="page"] * { background: transparent !important; color: var(--accent-deep) !important; box-shadow: none !important; font-weight: 400 !important; }

p, ul, ol, blockquote, figure { margin-block: var(--space-4); }
ul { list-style: disc; padding-left: 1.25rem; }

a { color: var(--accent-deep); }
button, input[type="button"], input[type="submit"], [data-button] {
  background: var(--accent);
  color: var(--surface);
  border: none;
}

[data-btn-secondary], button[data-btn-secondary] {
  background: transparent; color: var(--accent-deep); border: 2px solid var(--accent-soft); padding: 0.45rem 0.8rem; border-radius: 10px;
}

:focus { outline: 3px solid rgba(var(--accent-rgb), 0.18); outline-offset: 3px; }

figure img, img { border-radius: 12px; box-shadow: 0 8px 24px rgba(var(--text-rgb), 0.08); }

@media (prefers-reduced-motion: reduce) {
  :where(html, body, main, header, footer, section, article, nav, div, p, h1, h2, h3, h4, h5, h6, ul, ol, li, figure, figcaption, picture, img, blockquote, pre, code, a, button, input, textarea, select, label) {
    transition: none; animation: none;
  }
}

#theme-toggle {
  position: absolute;
  right: 1rem;
  top: 0.9rem;
  display: inline-flex;
  align-items: center;
  justify-content: center;
  width: 38px;
  height: 38px;
  padding: 0;
  border-radius: 999px;
  background: transparent;
  color: var(--accent-deep);
  border: 1px solid rgba(var(--accent-deep-rgb), 0.14);
  opacity: 0.86;
  cursor: pointer;
  transition: border-color 160ms ease, opacity 160ms ease;
  font-size: 1.05rem;
}

#theme-toggle [data-theme-icon] { line-height: 1; display: inline-block; width: 20px; height: 20px; }
#theme-toggle:hover { opacity: 1; border-color: rgba(var(--accent-deep-rgb), 0.2); }
#theme-toggle:focus-visible { outline: 3px solid rgba(var(--accent-rgb), 0.18); outline-offset: 3px; }
header { position: relative; }

@media (max-width: 768px) {
  #theme-toggle { right: .6rem; top: .6rem; width: 34px; height: 34px; }
}

[data-theme-icon] { width: 20px; height: 20px; display: inline-block; }
[data-icon-sun] { display: none; }
.dark-theme #theme-toggle [data-icon-sun], [data-theme="dark"] #theme-toggle [data-icon-sun] { display: inline-block; }
.dark-theme #theme-toggle [data-icon-moon], [data-theme="dark"] #theme-toggle [data-icon-moon] { display: none; }

:root[data-theme-transition], [data-theme-transition], [data-theme-transition] :where(html, body, main, header, footer, section, article, nav, div, p, h1, h2, h3, h4, h5, h6, ul, ol, li, figure, figcaption, picture, img, blockquote, pre, code, a, button, input, textarea, select, label) {
  transition: background-color 220ms ease, color 220ms ease, border-color 220ms ease, box-shadow 220ms ease;
}

@media (prefers-reduced-motion: reduce) {
  :root[data-theme-transition], [data-theme-transition], [data-theme-transition] * { transition: none !important; }
}

button {
  padding: 0.55rem 0.95rem;
  border-radius: 999px;
  font-weight: 600;
  background: var(--accent);
  color: var(--surface);
  border: none;
  cursor: pointer;
  box-shadow: var(--shadow);
}
button:hover, button:focus-visible { background: var(--accent-deep); transform: translateY(-1px); box-shadow: 0 10px 26px rgba(var(--text-rgb), 0.08); }

[data-btn-primary] { background: linear-gradient(90deg, var(--accent) 0%, rgba(var(--holiday-gold-rgb),0.85) 80%); color: var(--surface); padding-left: 1.05rem; padding-right: 1.05rem; box-shadow: 0 10px 28px rgba(var(--text-rgb), 0.09); }

[data-intro], [data-intro] * { box-sizing: border-box; }
[data-intro] {
  max-width: min(980px, 92%);
  margin: 2.25rem auto 1.25rem;
  padding: 2.25rem 1.25rem;
  /* make the intro container transparent so the paragraph isn't sitting on a beige panel */
  background: transparent;
  border-radius: calc(var(--radius) + 10px);
  border: none;
  box-shadow: none;
}

[data-page-title], [data-section-title] { position: relative; }
/* remove the decorative gold bars under titles for a cleaner reading flow */
[data-page-title]::after, [data-section-title]::after {
  content: '';
  position: absolute;
  left: 50%;
  transform: translateX(-50%);
  bottom: -0.5rem;
  width: 3.6rem;
  height: 0.06rem;
  border-radius: 2px;
  background: rgba(0,0,0,0.06);
}

blockquote {
  background: rgba(var(--accent-deep-rgb), 0.06);
  color: var(--text);
  padding: 1rem 1.25rem;
  border-left: 4px solid rgba(var(--holiday-gold-rgb), 0.6);
  border-radius: 8px;
  max-width: 64rem;
  margin: 1.25rem auto;
  text-align: center;
  font-size: 1.125rem;
  font-style: italic;
}
blockquote cite { display: block; margin-top: .6rem; color: rgba(var(--text-rgb), 0.7); font-style: normal; text-align: center; }

/* Figures act as cards and are constrained to the main content width so framed
   images look balanced on large screens. The image inside the figure remains
   fluid and preserves its aspect ratio. */
figure {
  margin: var(--space-6) auto;
  text-align: center;
  background: var(--surface);
  border-radius: var(--radius);
  padding: var(--space-4);
  box-shadow: var(--shadow);
  border: 1px solid rgba(var(--accent-deep-rgb), .12);
  /* Constrain the framed card to the content width to avoid oversized visuals */
  max-width: var(--content-width);
  width: 100%;
}

/* Responsive images inside figures: never overflow, keep proportions, and center */
figure img, img[data-gold] {
  display: block;
  width: 100%;
  max-width: 100%;
  height: auto;
  border-radius: 12px;
  margin: 0 auto;
  box-shadow: 0 8px 24px rgba(var(--text-rgb), 0.12);
  /* Ensure the image itself does not carry an extra border or padding to
     avoid a double-border appearance when inside a framed figure. */
  border: none;
  padding: 0;
}
figcaption { margin-top: .75rem; font-size: .95rem; color: var(--accent-deep); text-align: center; }

footer {
  padding: 2rem 0;
  margin-top: 3rem;
  text-align: center;
  border-top: 4px solid var(--accent);
  background-color: var(--clay-glow);
  color: var(--surface);
}
footer p { font-size: .95rem; line-height: 1.6; margin-bottom: 1rem; }
footer a { color: var(--accent-deep); text-decoration: none; margin: 0 .3rem; }
footer a:hover, footer a:focus-visible { color: var(--accent); text-decoration: underline; }

footer ul { list-style: none; margin: .5rem 0; padding: 0; display: inline-flex; gap: .6rem .9rem; align-items: center; }
footer ul li { display: flex; align-items: center; }
footer ul li:not(:last-child)::after { content: '✶'; color: var(--holiday-gold); padding: 0 .5rem; font-size: .9rem; line-height: 1; display: inline-block; }

[data-theme="dark"] {
  --dark-bg: #0f211b;
  --dark-surface: #1b2621;
  --dark-text: #efece6;
  --dark-accent: #8fbf9e;
  --dark-accent-deep: #5f8f6f;
  --dark-accent-soft: #90b59a;
  --dark-gold: #cdb569;
  /* Dark-mode gold adjusted per user request for stronger contrast */
  --dark-gold: #B8933F;
  /* Match the dark gold hex (#B8933F) with its RGB for consistent glows/shadows */
  --holiday-gold-rgb: 184, 147, 63;
  /* header gold in dark theme: slightly lighter than the dark gold but still warm */
  --header-gold: #CAA145;
  --bg-base: var(--dark-bg);
  --bg-grad-1: #162824;
  --bg-grad-2: #101e1a;
  --bg-grad-3: #0b1512;
  --surface: var(--dark-surface);
  --text: #f6f4ef;
  --text-rgb: 246, 244, 239;
  --accent: var(--dark-accent);
  --accent-deep: var(--dark-accent-deep);
  --accent-soft: var(--dark-accent-soft);
  --holiday-gold: var(--dark-gold);
  --site-divider: rgba(21,36,30,0.6);
}

.dark-theme :focus { outline: 3px solid rgba(159,189,167, 0.22); outline-offset: 3px; }

/* unify gold-border styling so all data-gold figures share the same border
   and padding. Apply the frame on the figure element only to avoid a
   double-border effect and preserve the image's visible area. */
.img-gold-border, figure[data-gold] {
  box-sizing: border-box;
  border: 6px solid var(--holiday-gold);
  border-radius: 12px;
  background-color: var(--holiday-cream);
  box-shadow: 0 8px 18px rgba(var(--holiday-gold-rgb), 0.12);
  padding: 0.5rem;
}

.dark-theme .img-gold-border, .dark-theme figure[data-gold] {
  border-color: var(--holiday-gold);
  border-width: 6px;
  box-shadow: 0 10px 22px rgba(0,0,0,0.24), 0 0 12px rgba(var(--holiday-gold-rgb), 0.06) inset;
  animation: goldShimmerBorderDark 3.2s ease-in-out infinite;
}

@keyframes goldShimmerBorderDark { 0% { box-shadow: 0 10px 22px rgba(0,0,0,0.22), 0 0 8px rgba(var(--holiday-gold-rgb), 0.04) inset; } 50% { box-shadow: 0 18px 36px rgba(0,0,0,0.32), 0 0 18px rgba(var(--holiday-gold-rgb), 0.12) inset; } 100% { box-shadow: 0 10px 22px rgba(0,0,0,0.22), 0 0 8px rgba(var(--holiday-gold-rgb), 0.04) inset; } }

/* Logo / dragon glow: support inline SVGs and img fallbacks in dark theme
   - For inline SVGs, prefer colorizing via CSS fill/stroke where possible
   - For raster <img> fallbacks, apply a gold drop-shadow to simulate glow
*/
.dark-theme [data-logo], [data-theme="dark"] [data-logo] {
  /* base glow */
  filter: drop-shadow(0 0 4px rgba(var(--holiday-gold-rgb), 0.65)) drop-shadow(0 0 10px rgba(var(--holiday-gold-rgb), 0.45));
  animation: dragonShine 3.2s ease-in-out infinite;
}

/* If the logo is an inline SVG, color its shapes to the holiday gold for clarity */
.dark-theme [data-logo] svg, [data-theme="dark"] [data-logo] svg {
  fill: var(--holiday-gold) !important;
  stroke: var(--holiday-gold) !important;
  /* allow the drop-shadow to show through */
  mix-blend-mode: screen;
}

/* For raster <img> logos, keep the drop-shadow but also add a stronger glow */
.dark-theme [data-logo] img, [data-theme="dark"] [data-logo] img {
  filter: drop-shadow(0 0 6px rgba(var(--holiday-gold-rgb), 0.8));
}

@keyframes dragonShine {
  0%,100% { filter: drop-shadow(0 0 4px rgba(var(--holiday-gold-rgb), 0.65)) drop-shadow(0 0 10px rgba(var(--holiday-gold-rgb), 0.45)); }
  50% { filter: drop-shadow(0 0 8px rgba(var(--holiday-gold-rgb), 0.95)) drop-shadow(0 0 20px rgba(var(--holiday-gold-rgb), 0.6)); }
}

.dark-theme [data-logo]:hover, .dark-theme [data-logo]:focus, [data-theme="dark"] [data-logo]:hover, [data-theme="dark"] [data-logo]:focus {
  filter: drop-shadow(0 0 10px rgba(var(--holiday-gold-rgb), 0.95)) drop-shadow(0 0 24px rgba(var(--holiday-gold-rgb), 0.6));
  transition: filter 220ms ease;
}

@media (prefers-reduced-motion: reduce) { .dark-theme [data-logo], [data-theme="dark"] [data-logo] { animation: none; } }

[data-container], main[data-container] { max-width: var(--content-width); margin: 0 auto; padding: 0 var(--space-4); }

[data-flow] > * + * { margin-top: var(--space-4); }

[data-intro] { padding: var(--space-6) 0; }
figure[data-holiday] { background: var(--holiday-cream); border: 1px solid rgba(var(--holiday-gold-rgb), 0.35); }

/* (duplicate img[data-gold] rule consolidated above) */

[data-intro-landscape] { max-width: 100%; height: auto; display: block; }

[data-swatches] { display: flex; gap: .75rem 1rem; flex-wrap: wrap; align-items: center; padding: 0; margin: 0; list-style: none; }
[data-swatches] li { display: flex; gap: .6rem; align-items: center; }
[data-color-box], [data-swatches] [data-swatch-color] { display: inline-block; width: 2.4rem; height: 2.4rem; border-radius: 6px; box-shadow: 0 4px 12px rgba(0,0,0,0.06); }

[data-site-title] { margin: 0; line-height: 1.1; font-family: var(--brand-heading); font-weight: 800; letter-spacing: 0.2px; }
[data-site-title] .line-1 { display: block; font-size: clamp(1.35rem, 1rem + 2vw, 2.1rem); }

[data-note-gold] { color: var(--holiday-gold); }

/* (site title uses text gradient; no separate dragon SVG rules needed) */

[data-visually-hidden] { position: absolute; height: 1px; width: 1px; overflow: hidden; clip: rect(1px, 1px, 1px, 1px); white-space: nowrap; border: 0; padding: 0; margin: -1px; }

[data-text-gold] { color: var(--holiday-gold); font-weight: 600; }

/* Header site title: use a slightly lighter gold for visual emphasis while keeping one solid color */
[data-site-title][data-text-gold] { color: var(--header-gold) !important; }

[data-meta] { font-size: .98rem; color: var(--accent-deep); }
[data-swatch-label] { font-family: var(--brand-body); font-size: .95rem; color: var(--text); }
[data-type-card] { margin-top: var(--space-4); padding: var(--space-4); border-radius: 10px; background: transparent; }
[data-type-label] { font-weight: 600; margin-bottom: .35rem; display: block; }

[data-palette-sand] { background: var(--palette-sand); }
[data-palette-surface] { background: var(--palette-surface); }
[data-palette-text] { background: var(--palette-text); }
[data-palette-accent] { background: var(--palette-accent); }
[data-palette-accent-deep] { background: var(--palette-accent-deep); }
[data-palette-mist] { background: var(--palette-mist); }
[data-palette-clay] { background: var(--palette-clay); }
[data-palette-holiday-cream] { background: var(--palette-holiday-cream); }
[data-palette-gold] { background: var(--palette-gold); }

.dark-theme .img-gold-border { border: 6px solid var(--holiday-gold); border-radius: 12px; }

.dark-theme blockquote cite { color: rgba(var(--text-rgb), 0.85); }

@media (max-width: 768px) { nav { flex-direction: column; } body { background-attachment: scroll; } }

/* Page-scoped spacing: balanced, responsive gap between nav/header and specific page title */
[data-page-title][data-space-after-nav] {
  /* responsive gap: min 1.25rem on very small screens, scales with viewport up to 5rem */
  margin-top: clamp(1.25rem, 2.5vw + 1rem, 5rem);
}

/* Tighter spacing for the homepage title so the main heading sits closer to the nav */
body[data-home] [data-page-title][data-space-after-nav] {
  margin-top: clamp(0.6rem, 1.2vw + 0.6rem, 2.2rem);
}

/* Preserve the original home image sizing and make introduction images match it.
   The home page uses `body[data-home]`; the introduction content uses `[data-intro]`.
   These rules ensure those images share the same visual length and object-fit. */
/* Keep home and intro images visually consistent by matching their max-width
   while letting the browser preserve aspect ratio (height:auto). This avoids
   forced cropping while keeping their displayed size similar. */
body[data-home] figure img,
[data-intro] figure img,
[data-intro] img {
  max-width: 1200px;
  width: 100%;
  height: auto;
}

