/* web115/styles/default.css */

/* ---------- Base & Tokens ---------- */
html { box-sizing: border-box; }
/* Apply inherit box-sizing to all elements and pseudo elements */
*, *::before, *::after { box-sizing: inherit; }
/* Subtle vignette overlay to add depth */
/* Tokens and element-based rules */

:root {
  /* background base used for the 3-stop gradient; mapping keeps API flexible */
  --bg-base: #F7EAD9;
  --bg-grad-1: var(--bg-base);
  --bg-grad-2: var(--bg-base);
  --bg-grad-3: var(--bg-base);
  --surface: #FFFFFF;
  --text: #2F3A34;
  /* Slightly deeper, muted green for a more upscale feel */
  --accent: #5E7D62; /* was #6F8F6B */
/* Main content container */
  --clay-glow: #B85B39; /* subtle warmth */
  --accent-deep: #365746; /* slightly deeper/muted */
  --accent-soft: #92ABA6; /* keep soft variant similar */
  /* Warmed gold for a richer, upscale shimmer */
  --holiday-gold: #C9A84D; /* tuned warmer and slightly desaturated */
  --holiday-cream: #FFF7E2; /* softer cream */
  /* RGB helper for gold so we can use it in rgba() dynamically */
/* Header */

  /* explicit palette synonyms for clarity */
  --palette-sand: var(--bg-grad-1);
  --palette-surface: var(--surface);
  --palette-text: var(--text);
  --palette-accent: var(--accent);
  --palette-accent-deep: var(--accent-deep);
  --palette-mist: var(--accent-soft);
/* Strong accessible focus outline */
  --palette-holiday-cream: var(--holiday-cream);
  --palette-gold: var(--holiday-gold);

/* Header positioned for absolute children (theme toggle) */
  --brand-body: "Inter", sans-serif;

  --content-width: 960px;
  --space-4: 1rem;
/* Theme transition controlled via data attributes (see classless) */
  /* Softer, slightly warmer shadow to feel more inviting*/
  --shadow: 0 10px 36px rgba(33, 36, 32, 0.10);
/* Blockquote: refined contrast */
  --site-divider: rgba(var(--accent-deep-rgb), 0.08);
  /* RGB helpers for frequently used palette colors */
  --accent-rgb: 94, 125, 98; /* #5E7D62 */
  --accent-deep-rgb: 54, 87, 70; /* #365746 */
  --text-rgb: 47, 58, 52; /* #2F3A34 (keep text same for accessibility) */
  /* focus ring token (default) */
  --focus-ring: rgba(var(--accent-rgb), 0.18);
  /* page overlay tint (rgb) and strength to subtly shift body tone */
  --bg-overlay-rgb: 245, 241, 236; /* warm off-white tint for light mode */
  --bg-overlay-strength: 0.06;
}

/* Global layout & typography (element-based) */
html, body { height: 100%; }
body {
/* Figures (cards) */
  font-family: var(--brand-body);
  color: var(--text);
  line-height: 1.6;
  /* Layered background: subtle color overlay, gradient stops, then image */
  background:
    linear-gradient(rgba(var(--bg-overlay-rgb), var(--bg-overlay-strength)), rgba(var(--bg-overlay-rgb), var(--bg-overlay-strength))),
    linear-gradient(var(--bg-grad-1), var(--bg-grad-2), var(--bg-grad-3)),
    url("images/spa-bg.svg");
  background-size: cover;
  background-repeat: no-repeat;
  background-attachment: fixed;
/* Footer with warmer clay tone */

/* Subtle vignette overlay to add depth (luxury feel) */
body::after {
  content: '';
  position: fixed;
  inset: 0;
  pointer-events: none;
  /* subtle, low-contrast vignette for depth â€” intentionally gentle */
  background: radial-gradient(1200px 600px at 50% 15%, rgba(0,0,0,0.03), transparent 40%), linear-gradient(transparent, rgba(0,0,0,0.01));
  mix-blend-mode: multiply;
/* Dark theme variables (applied via [data-theme="dark"]) */
/* Container -> main (single content area) */
main {
  max-width: var(--content-width);
  margin: 0 auto;
  padding: 0 var(--space-4);
}

/* Header */
header {
  padding: calc(var(--space-4) + 0.5rem) 0;
  text-align: center;
  background: var(--surface);
  border-bottom: 1px solid var(--site-divider);
}
/* Site title in header uses attribute-based selector to avoid qualifying headings */

/* Decorative shimmer previously used a .dragon class (removed notes). */

/* Headings */
/* Use attribute-based heading rules to avoid qualified heading selectors */
/* Headings are defined in default.classless.css (canonical source) */

/* Navigation (element) */
nav { display: flex; flex-wrap: wrap; justify-content: center; gap: .5rem 1rem; margin-top: .5rem; }
nav a { color: var(--accent-deep); text-decoration: none; padding: .4rem .75rem; border-radius: 999px; transition: background-color 160ms ease, transform 120ms ease; }
nav a:hover, nav a:focus-visible { text-decoration: underline; background: rgba(var(--accent-deep-rgb), 0.08); transform: translateY(-1px); }
nav a[aria-current="page"] { background: var(--accent); color: var(--surface); font-weight: 600; box-shadow: 0 0 0 2px rgba(var(--accent-deep-rgb), 0.08) inset, var(--shadow); }

/* Text & lists */
p, ul, ol, blockquote, figure { margin-block: var(--space-4); }
ul { list-style: disc; padding-left: 1.25rem; }

/* Brand enforcement: links */
a { color: var(--accent-deep); }
/* All buttons are primary by default; authors may opt into variants via attributes */
button, input[type="button"], input[type="submit"], [data-button] {
  background: var(--accent); /* primary */
  color: var(--surface);
  border: none;
}
/* Secondary button helper for exceptions */
[data-btn-secondary], button[data-btn-secondary] {
  background: transparent; color: var(--accent-deep); border: 2px solid var(--accent-soft); padding: 0.45rem 0.8rem; border-radius: 10px;
}

/* Migration: remove image-level gold borders; use figure[data-holiday]/[data-gold] */
:focus { outline: 3px solid rgba(var(--accent-rgb), 0.18); outline-offset: 3px; }

/* Improve blockquote cite legibility in dark mode */
figure img, img { border-radius: 12px; box-shadow: 0 8px 24px rgba(var(--text-rgb), 0.08); }

/* Respect user reduced motion preference */
@media (prefers-reduced-motion: reduce) {
  /* Respect reduced-motion for common elements without using the universal selector */
  :where(html, body, main, header, footer, section, article, nav, div, p, h1, h2, h3, h4, h5, h6, ul, ol, li, figure, figcaption, picture, img, blockquote, pre, code, a, button, input, textarea, select, label) {
    transition: none; animation: none;
  }
}

/* Theme toggle button (placed top-right of header, matches nav icon scale) */
#theme-toggle {
  position: absolute;
  right: 1rem;
  top: 0.9rem;
  display: inline-flex;
  align-items: center;
  justify-content: center;
  width: 38px;
  height: 38px;
  padding: 0;
  border-radius: 999px; /* fully circular to match nav pill aesthetic */
  background: transparent;
  color: var(--accent-deep);
  border: 1px solid rgba(var(--accent-deep-rgb), 0.14);
  opacity: 0.86; /* slightly muted */
  cursor: pointer;
  transition: border-color 160ms ease, opacity 160ms ease;
  font-size: 1.05rem;
}

#theme-toggle [data-theme-icon] { line-height: 1; display: inline-block; width: 20px; height: 20px; }

/* Subtle hover: slightly increase contrast but avoid movement */
#theme-toggle:hover { opacity: 1; border-color: rgba(var(--accent-deep-rgb), 0.2); }

/* Strong visible focus for accessibility */
#theme-toggle:focus-visible { outline: 3px solid rgba(var(--accent-rgb), 0.18); outline-offset: 3px; }

/* Ensure the header is positioned to allow absolute placement */
header { position: relative; }

/* Keep size consistent with nav item roundness on small screens */
@media (max-width: 768px) {
  #theme-toggle { right: .6rem; top: .6rem; width: 34px; height: 34px; }
}

/* Icon sizing and default visibility (attribute-based) */
[data-theme-icon] { width: 20px; height: 20px; display: inline-block; }
[data-icon-sun] { display: none; }

/* When dark theme active, show sun and hide moon (support both class and attribute on <html>) */
.dark-theme #theme-toggle [data-icon-sun], [data-theme="dark"] #theme-toggle [data-icon-sun] { display: inline-block; }
.dark-theme #theme-toggle [data-icon-moon], [data-theme="dark"] #theme-toggle [data-icon-moon] { display: none; }

/* Smooth transition support only when theme-transition attribute is present */
/* Theme transition and reduced-motion handling are defined in default.classless.css */

/* Buttons (element) */
button {
  padding: 0.55rem 0.95rem;
  border-radius: 999px;
  font-weight: 600;
  background: var(--accent);
  color: var(--surface);
  border: none;
  cursor: pointer;
  box-shadow: var(--shadow);
}
button:hover, button:focus-visible { background: var(--accent-deep); transform: translateY(-1px); box-shadow: 0 10px 26px rgba(var(--text-rgb), 0.08); }

/* Primary button variant that authors can opt into via attribute */
[data-btn-primary] { background: linear-gradient(90deg, var(--accent) 0%, rgba(var(--holiday-gold-rgb),0.85) 80%); color: var(--surface); padding-left: 1.05rem; padding-right: 1.05rem; box-shadow: 0 10px 28px rgba(var(--text-rgb), 0.09); }

/* Intro / hero card: sit the welcome text on a surface card for clarity */
[data-intro], [data-intro] * { box-sizing: border-box; }
[data-intro] {
  max-width: min(980px, 92%);
  margin: 2.25rem auto 1.25rem;
  padding: 2.25rem 1.25rem;
  background: linear-gradient(180deg, rgba(var(--bg-overlay-rgb), 0.045), transparent);
  border-radius: calc(var(--radius) + 10px);
  border: 1px solid rgba(var(--accent-deep-rgb), 0.04);
  box-shadow: 0 20px 48px rgba(var(--text-rgb), 0.08), inset 0 1px 0 rgba(var(--accent-rgb), 0.02);
}


/* Blockquote styling: refined contrast (safer) */
blockquote {
  /* originally: background: var(--accent-soft); color: var(--holiday-gold); */
  background: rgba(var(--accent-deep-rgb), 0.06);
  color: var(--text);
  padding: 1rem 1.25rem;
  border-left: 4px solid rgba(var(--holiday-gold-rgb), 0.6);
  border-radius: 8px;
  max-width: 64rem;
  margin: 1.25rem auto;
  text-align: center;
  font-size: 1.125rem;
  font-style: italic;
}
blockquote cite { display: block; margin-top: .6rem; color: rgba(var(--text-rgb), 0.7); font-style: normal; }

/* Figures */
figure {
  margin: var(--space-6) auto;
  text-align: center;
  background: var(--surface);
  border-radius: var(--radius);
  padding: var(--space-4);
  box-shadow: var(--shadow);
  border: 1px solid rgba(var(--accent-deep-rgb), .12);
}
figure img {
  display: block;
  max-width: min(100%, 1200px);
  height: auto;
  border-radius: 12px;
  margin: 0 auto;
  box-shadow: 0 8px 24px rgba(var(--text-rgb), 0.12);
}
figcaption { margin-top: .75rem; font-size: .95rem; color: var(--accent-deep); }

/* Footer (element) */
/* Footer: stronger contrast using the warmer clay tone */
footer {
  padding: 2rem 0;
  margin-top: 3rem;
  text-align: center;
  border-top: 4px solid var(--accent);
  background-color: var(--clay-glow);
  color: var(--surface);
}
footer p { font-size: .95rem; line-height: 1.6; margin-bottom: 1rem; }
footer a { color: var(--accent-deep); text-decoration: none; margin: 0 .3rem; }
footer a:hover, footer a:focus-visible { color: var(--accent); text-decoration: underline; }

/* Utility: simple footer list separators using element selectors */
footer ul { list-style: none; margin: .5rem 0; padding: 0; display: inline-flex; gap: .6rem .9rem; align-items: center; }
footer ul li { display: flex; align-items: center; }
footer ul li:not(:last-child)::after { content: 'âœ¶'; color: var(--holiday-gold); padding: 0 .5rem; font-size: .9rem; line-height: 1; display: inline-block; }

/* Dark theme variables â€” applied when [data-theme="dark"] is present on <html>. */
[data-theme="dark"] {
  /* Earthy grey-green dark theme (dark-mode tokens) */
  /* DRY dark-mode: set base values and derive stops where needed */
  --dark-bg: #0f211b;         /* earthy deep green-gray base */
  --dark-surface: #1b2621;    /* panel surface */
  --dark-text: #efece6;       /* readable off-white */
  --dark-accent: #8fbf9e;     /* primary accent */
  --dark-accent-deep: #5f8f6f;
  --dark-accent-soft: #90b59a;
  --dark-gold: #cdb569;

  /* map RGB helper for dark mode */
  --holiday-gold-rgb: 205, 181, 105;

  /* Map derived variables so existing rules that use --bg-grad-* keep working */
  --bg-base: var(--dark-bg);
  --bg-grad-1: #162824;
  --bg-grad-2: #101e1a;
  --bg-grad-3: #0b1512;
  --surface: var(--dark-surface);
  /* bump contrast slightly for long-form reading */
  --text: #f6f4ef; /* slightly brighter than --dark-text */
  /* rgb helper for color computations in dark mode */
  --text-rgb: 246, 244, 239;
  --accent: var(--dark-accent);
  --accent-deep: var(--dark-accent-deep);
  --accent-soft: var(--dark-accent-soft);
  --holiday-gold: var(--dark-gold);

  /* make header/footer divider a touch stronger in dark mode */
  --site-divider: rgba(21,36,30,0.6);
}

/* stronger focus ring in dark mode for accessibility */
.dark-theme :focus { outline: 3px solid rgba(159,189,167,0.22); outline-offset: 3px; }

/* Removed legacy image-level gold-border rules; use figure[data-holiday]. */

@keyframes goldShimmerBorderDark {
  0% { box-shadow: 0 10px 22px rgba(0,0,0,0.22), 0 0 8px rgba(var(--holiday-gold-rgb), 0.04) inset; }
  50% { box-shadow: 0 18px 36px rgba(0,0,0,0.32), 0 0 18px rgba(var(--holiday-gold-rgb), 0.12) inset; }
  100% { box-shadow: 0 10px 22px rgba(0,0,0,0.22), 0 0 8px rgba(var(--holiday-gold-rgb), 0.04) inset; }
}

/* Unified dark-theme logo (consolidated duration) */
.dark-theme [data-logo], [data-theme="dark"] [data-logo] {
  filter: drop-shadow(0 0 3px rgba(var(--holiday-gold-rgb), 0.6)) drop-shadow(0 0 8px rgba(var(--holiday-gold-rgb), 0.4));
  animation: dragonShine 3.2s ease-in-out infinite;
}

@keyframes dragonShine {
  0%, 100% {
    filter: drop-shadow(0 0 3px rgba(var(--holiday-gold-rgb), 0.6)) drop-shadow(0 0 8px rgba(var(--holiday-gold-rgb), 0.4));
  }
  50% {
    filter: drop-shadow(0 0 5px rgba(var(--holiday-gold-rgb), 0.9)) drop-shadow(0 0 12px rgba(var(--holiday-gold-rgb), 0.6));
  }
}

/* Intensify dragon glow on hover/focus (still dark-mode only) */
.dark-theme [data-logo]:hover,
.dark-theme [data-logo]:focus,
[data-theme="dark"] [data-logo]:hover,
[data-theme="dark"] [data-logo]:focus {
  filter: drop-shadow(0 0 8px rgba(var(--holiday-gold-rgb), 0.95)) drop-shadow(0 0 20px rgba(var(--holiday-gold-rgb), 0.6));
  transition: filter 220ms ease;
}

@media (prefers-reduced-motion: reduce) {
  .dark-theme [data-logo], [data-theme="dark"] [data-logo] { animation: none; }
}

/* Compatibility: attribute-based mappings (classless equivalents) */

/* Page container commonly used in templates */
[data-container], main[data-container] { max-width: var(--content-width); margin: 0 auto; padding: 0 var(--space-4); }

/* Utility flow spacing (stack children vertically with rhythm) */
[data-flow] > * + * { margin-top: var(--space-4); }

/* Attribute-based intro band */
[data-intro] { padding: var(--space-6) 0; }

/* Decorative figure variant used in templates (attribute-based) */
figure[data-holiday] {
  box-sizing: border-box;
  position: relative;
  border-radius: 12px;
  padding: 0.75rem;
  background-color: var(--holiday-cream);
  box-shadow: inset 0 0 0 6px var(--holiday-gold), 0 10px 20px rgba(var(--holiday-gold-rgb), 0.08);
  overflow: visible;
  max-width: var(--content-width);
  width: 100%;
}

figure[data-holiday]::before {
  content: '';
  position: absolute;
  inset: -10px;
  border-radius: calc(12px + 10px);
  background: var(--holiday-gold-outer);
  z-index: -1;
  box-shadow: 0 12px 36px rgba(var(--holiday-gold-rgb), 0.12);
}

/* Images inside the holiday/gold figure are neutral so the figure's inner cream and inset
   gold band remain the authoritative frame. */
figure[data-holiday] img {
  display: block;
  width: 100%;
  max-width: 100%;
  height: auto;
  border-radius: calc(var(--radius) - 6px);
  margin: 0 auto;
  box-shadow: none;
  border: none;
  padding: 0;
}

.dark-theme figure[data-holiday]::before { background: rgba(26, 33, 28, 0.55); box-shadow: 0 16px 44px rgba(0,0,0,0.36); }

/* Migration note: image-level gold-border fallbacks removed. Use <figure data-holiday> / <figure data-gold> instead. */

/* Responsive/attribute helpers for intro images */
[data-intro-landscape] { max-width: 100%; height: auto; display: block; }

/* Swatches: attribute-only implementation */
[data-swatches] { display: flex; gap: .75rem 1rem; flex-wrap: wrap; align-items: center; padding: 0; margin: 0; list-style: none; }
[data-swatches] li { display: flex; gap: .6rem; align-items: center; }
[data-color-box], [data-swatches] [data-swatch-color] { display: inline-block; width: 2.4rem; height: 2.4rem; border-radius: 6px; box-shadow: 0 4px 12px rgba(0,0,0,0.06); }

[data-note-gold] { color: var(--holiday-gold); }

/* Visually hidden utility (attribute-based) */
[data-visually-hidden] {
  position: absolute;
  height: 1px; width: 1px; overflow: hidden;
  clip: rect(1px, 1px, 1px, 1px); white-space: nowrap;
  border: 0; padding: 0; margin: -1px;
}

/* small text helper for gold accents used in content */
[data-text-gold] { color: var(--holiday-gold); font-weight: 600; }

/* Brand page small helpers (attribute-based equivalents) */
[data-meta] { font-size: .98rem; color: var(--accent-deep); }
[data-swatch-label] { font-family: var(--brand-body); font-size: .95rem; color: var(--text); }
[data-type-card] { margin-top: var(--space-4); padding: var(--space-4); border-radius: 10px; background: transparent; }
[data-type-label] { font-weight: 600; margin-bottom: .35rem; display: block; }

/* Palette helpers used by the /brand or swatches markup (attribute-based) */
[data-palette-sand] { background: var(--palette-sand); }
[data-palette-surface] { background: var(--palette-surface); }
[data-palette-text] { background: var(--palette-text); }
[data-palette-accent] { background: var(--palette-accent); }
[data-palette-accent-deep] { background: var(--palette-accent-deep); }
[data-palette-mist] { background: var(--palette-mist); }
[data-palette-clay] { background: var(--palette-clay); }
[data-palette-holiday-cream] { background: var(--palette-holiday-cream); }
[data-palette-gold] { background: var(--palette-gold); }

/* Ensure blockquote cites remain legible in dark mode */
.dark-theme blockquote cite {
  color: rgba(var(--text-rgb), 0.85); /* boost visibility for small citation text */
}

/* ---------- Responsive ---------- */
/* Keep a single media query; also disable fixed background on small screens for perf */
@media (max-width: 768px) {
  nav { flex-direction: column; }
  body { background-attachment: scroll; } /* optional mobile perf tweak */
}
