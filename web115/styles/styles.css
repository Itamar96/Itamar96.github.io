/* Desert Matcha - Iridescent Cinderwyrm Bodywork */

/* Base */
html {
  box-sizing: border-box;
}

/* Accumulus-friendly inheritance (no universal selector) */
body {
  box-sizing: inherit;
}

:root {
  /* Palette (matches the brand guide swatches) */
  --bg-grad-1: #F7EAD9;   /* sand background */
  --bg-grad-2: #F7EAD9;
  --bg-grad-3: #F7EAD9;
  --surface:   #FFFFFF;   /* surface and cards */
  --text:      #2F3A34;   /* primary text */
  --accent:    #6F8F6B;   /* accent buttons */
  --accent-deep: #3E574B; /* links and small text */
  --accent-soft: #8DA3A6; /* mist subtle UI */
  --lavender-soft: #C4633A; /* clay glow */

  /* Glow tokens */
  --glow-euca-strong: rgba(111, 143, 107, .32);
  --glow-euca-med:    rgba(111, 143, 107, .18);
  --glow-euca-soft:   rgba(111, 143, 107, .10);
  --glow-sage-med:    rgba(141, 163, 166, .18);
  --glow-lav-soft:    rgba(196, 99, 58, .14);

  /* Holiday palette you asked for */
  --holiday-cream: #FFF8DC; /* Holiday light background */
  --holiday-gold:  #D4AF37; /* Gold accent */
  --holiday-pine:  #2F6F4F;
  --holiday-berry: #B8403A;

  /* Fonts */
  --brand-heading: "Playfair Display", ui-serif, Georgia, serif;
  --brand-body: "Inter", ui-sans-serif, system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial, "Noto Sans";

  /* Layout helpers */
  --content-width: 960px;
  --space-1: .25rem;
  --space-2: .5rem;
  --space-3: .75rem;
  --space-4: 1rem;
  --space-6: 1.5rem;
  --space-8: 2rem;
  --radius: 14px;
  --shadow: 0 8px 30px rgba(47, 58, 52, .12);
}

/* Layout + background */
body {
  margin: 0;
  padding: 0;
  font-family: var(--brand-body);
  color: var(--text);
  background: linear-gradient(var(--bg-grad-1), var(--bg-grad-2), var(--bg-grad-3));
  background-image: url("/web115/images/spa-bg.svg");
  background-size: cover;
  background-repeat: no-repeat;
  background-attachment: fixed;
  background-position: center;
}

/* --- NEW: Shared container to unify left/right edges across header, main, footer --- */
.container {
  max-width: var(--content-width);
  margin-inline: auto;
  padding-inline: var(--space-4);
}

/* Header/Footer/Main shells (width now controlled by .container) */
header,
footer {
  background-color: var(--surface);
  color: var(--text);
  text-align: center;
  padding: 1rem;
  /* Removed per-element max-width; use .container for consistent edges */
  max-width: none;
  margin-inline: 0;
}

main {
  padding: 2rem 0; /* vertical padding only; horizontal handled by .container */
  max-width: none;
  margin-inline: 0;
}

/* Nav */
nav {
  display: flex;
  flex-wrap: wrap;
  gap: var(--space-2) var(--space-4);
  justify-content: center;
  margin-top: var(--space-2);
}

nav a {
  margin: 0 .5rem;
  color: var(--accent-deep);
  text-decoration: none;
  padding: .4rem .75rem;
  border-radius: 999px;
  transition: background-color 160ms ease, transform 120ms ease, color 120ms ease;
}

nav a:hover,
nav a:focus {
  text-decoration: underline;
  background: rgba(62, 87, 75, .08);
  transform: translateY(-1px);
}

nav a:focus {
  outline: 2px solid var(--accent);
  outline-offset: 2px;
}

nav a[aria-current="page"] {
  background: var(--accent);
  color: white; /* named color example */
  font-weight: 600;
  box-shadow: 0 0 0 2px rgba(62, 87, 75, .08) inset, var(--shadow);
}

/* Buttons */
.btn-row {
  display: flex;
  gap: .5rem;
  flex-wrap: wrap;
}

.btn {
  display: inline-block;
  padding: .55rem .9rem;
  border-radius: 10px;
  border: 1px solid rgba(62, 87, 75, .2);
  text-decoration: none;
  color: var(--accent-deep);
  background: #fff;
  transition: transform 120ms ease, background-color 160ms ease, border-color 160ms ease, color 120ms ease;
}

.btn:hover {
  background: #FAF3E8;
  transform: translateY(-1px);
}

.btn-brand {
  background: var(--accent);
  border-color: var(--accent);
  color: white;
}

.btn-brand:hover {
  filter: brightness(0.96);
}

/* Figures */
figure {
  margin: 1rem auto;
  text-align: center;
  background: #fff;
  border-radius: var(--radius);
  padding: var(--space-4);
  box-shadow: var(--shadow);
  border: 1px solid rgba(62, 87, 75, 0.12);
}

figure img {
  display: block;
  max-width: 320px;
  height: auto;
  border-radius: 12px;
  margin: 0 auto;
  border: 6px solid hsl(0, 0%, 100%); /* HSL example */
  box-shadow: 0 8px 24px rgba(47, 58, 52, .12);
}

figure figcaption {
  margin-top: .75rem;
  margin-bottom: 1rem;
  font-size: .9rem;
  color: var(--accent-deep);
}

/* Links */
a {
  color: var(--accent-deep);
  text-decoration: underline;
}

a:hover,
a:focus {
  color: var(--accent);
}

/* Headings (each defined once) */
h1 {
  font-family: var(--brand-heading);
  font-weight: 800;
  line-height: 1.2;
  margin: 0 0 var(--space-4);
  font-size: clamp(1.6rem, 1.1rem + 2.2vw, 2.4rem);
  text-shadow: 0 0 3px var(--glow-euca-soft), 0 0 7px var(--glow-sage-med), 0 0 12px var(--glow-lav-soft);
}

h2 {
  font-family: var(--brand-heading);
  font-weight: 700;
  line-height: 1.2;
  margin: 0 0 var(--space-4);
  font-size: clamp(1.3rem, 1.05rem + 1.2vw, 1.9rem);
  text-shadow: 0 0 3px var(--glow-euca-soft), 0 0 7px var(--glow-sage-med), 0 0 12px var(--glow-lav-soft);
}

h3 {
  font-family: var(--brand-heading);
  font-weight: 700;
  line-height: 1.2;
  margin: 0 0 var(--space-4);
  font-size: 1.15rem;
  text-shadow: 0 0 3px var(--glow-euca-soft), 0 0 7px var(--glow-sage-med), 0 0 12px var(--glow-lav-soft);
}

p,
ul,
ol,
blockquote,
figure {
  margin-block: var(--space-4);
}

.small {
  font-size: .9rem;
  opacity: .9;
}

/* Blockquote */
blockquote {
  padding: var(--space-4);
  border-left: 4px solid var(--accent);
  background: linear-gradient(180deg, rgba(141, 163, 166, 0.18), rgba(196, 99, 58, 0.10)); /* rgba example */
  border-radius: 0 var(--radius) var(--radius) 0;
  font-style: italic;
  text-shadow: 0 0 3px var(--glow-euca-soft), 0 0 7px var(--glow-sage-med), 0 0 12px var(--glow-lav-soft);
}

/* Subtle glow */
footer p,
footer a,
figure figcaption,
strong,
em,
main a {
  text-shadow: 0 0 3px var(--glow-euca-soft), 0 0 7px var(--glow-sage-med), 0 0 12px var(--glow-lav-soft);
}

/* Mascot glow */
.dragon {
  color: #ffffff;
  text-shadow: 0 0 4px var(--glow-euca-med), 0 0 10px var(--glow-lav-soft), 0 0 16px var(--glow-euca-strong);
}

/* Swatches */
.swatches {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));
  gap: 1rem;
  padding: 0;
  list-style: none;
}

.swatch {
  background: #fff;
  border: 1px solid rgba(62, 87, 75, 0.12);
  border-radius: 14px;
  padding: .9rem;
  text-align: center;
  box-shadow: var(--shadow);
}

.swatch::before {
  content: "";
  display: block;
  height: 64px;
  border-radius: 10px;
  margin-bottom: .6rem;
  background: var(--swatch, var(--accent));
  box-shadow: inset 0 0 0 2px rgba(62, 87, 75, 0.08);
}

.swatch span {
  display: block;
  font-weight: 600;
  color: #2F3A34;
}

.swatch em {
  display: block;
  font-style: normal;
  opacity: .85;
  font-size: .9rem;
  margin-top: .15rem;
  color: #3E574B;
}

/* Type demo cards */
.type-card {
  background: #fff;
  border: 1px solid rgba(62, 87, 75, 0.12);
  border-radius: 14px;
  padding: 1rem;
  margin-block: 1rem;
  box-shadow: var(--shadow);
}

.type-label {
  margin: 0 0 .5rem;
  font-size: .95rem;
  color: #3E574B;
}

.demo-h1 { font-size: clamp(1.8rem, 1.2rem + 2.2vw, 2.6rem); }
.demo-h2 { font-size: clamp(1.4rem, 1.1rem + 1.4vw, 2.0rem); }

/* Accessibility */
a:focus {
  outline: 3px solid rgba(111, 143, 107, 0.35);
  outline-offset: 2px;
  border-radius: 6px;
}

/* Reduced motion */
@media (prefers-reduced-motion: reduce) {
  a,
  button,
  nav a,
  img,
  figure,
  p,
  blockquote {
    transition: none;
    animation: none;
  }
}

/* Responsive header */
@media (min-width:700px) {
  header {
    display: block; /* container will manage internal grid */
  }
}

/* Two-line site title */
.site-title {
  margin: 0;
  line-height: 1.1;
  font-family: var(--brand-heading);
  font-weight: 800;
  letter-spacing: .2px;
}

.site-title .line-1,
.site-title .line-2 { display: block; }

.site-title .line-1 {
  font-size: clamp(1.35rem, 1rem + 2vw, 2.1rem);
}

.site-title .line-2 {
  font-size: clamp(1.1rem, .95rem + 1.6vw, 1.6rem);
  opacity: .95;
}

.site-title .sep,
.site-title .dot {
  margin: 0 .4rem;
  font-weight: 800;
  color: var(--accent);
}

/* Bulleted lists */
ul {
  list-style-type: disc;
  padding-left: 1.5rem;
  margin-block: var(--space-4);
}

ul ul {
  list-style-type: circle;
  padding-left: 1.5rem;
}

ul li::marker { color: var(--accent-deep); }
ul ul li::marker { color: var(--accent-soft); }

/* ---- Holiday Styles (class-only, Accumulus-friendly) ---- */
.img-gold-border {
  box-shadow: 0 0 0 3px #fff,
              0 0 0 6px var(--holiday-gold),
              0 8px 24px rgba(47,58,52,.12);
  border: 0;
}

.figure-holiday {
  background: var(--holiday-cream);
  border: 1px solid rgba(212,175,55,.35);
}
.figure-holiday img { border: 6px solid var(--holiday-gold); }

.note-gold { color: var(--holiday-gold); font-style: italic; }

.btn-festive {
  background: var(--holiday-pine);
  border-color: var(--holiday-pine);
  color: white;
}
.btn-festive:hover {
  filter: brightness(.96);
  box-shadow: 0 0 0 2px rgba(212,175,55,.25) inset, var(--shadow);
}

.link-festive { color: var(--holiday-pine); }
.link-festive:hover,
.link-festive:focus { color: var(--holiday-berry); }

.badge-festive {
  display: inline-block;
  padding: .25rem .5rem;
  border-radius: 999px;
  background: var(--holiday-berry);
  color: white;
  border: 1px solid var(--holiday-gold);
  box-shadow: 0 0 0 2px rgba(212,175,55,.15), var(--shadow);
}

/* Site-wide holiday accent swap when applied to <body> */
.holiday-theme {
  --accent: var(--holiday-pine);
  --accent-deep: #234F3B;
  --accent-soft: #A3BFAF;
}

/* Holiday blockquote variant */
.holiday {
  background: linear-gradient(180deg,
              rgba(163,191,175,.18),
              rgba(212,175,55,.10));
  border-left-color: var(--holiday-pine);
}

/* ---- Dark Theme (manual toggle with .dark-theme on <body>) ---- */
.dark-theme {
  --bg-grad-1: #1E1E1E;
  --bg-grad-2: #1E1E1E;
  --bg-grad-3: #121212;
  --surface: #1E1E1E;
  --text: #E4E4E4;
  --accent: #8FCB9B;
  --accent-deep: #B6E0B9;
  --accent-soft: #A7C7C2;
  --lavender-soft: #D47F5E;

  --glow-euca-strong: rgba(143, 214, 167, .32);
  --glow-euca-med: rgba(143, 214, 167, .18);
  --glow-euca-soft: rgba(143, 214, 167, .10);
  --glow-sage-med: rgba(190, 210, 213, .18);
  --glow-lav-soft: rgba(212, 127, 94, .14);
}

.dark-theme { background-image: none; }

.dark-theme header,
.dark-theme footer {
  background-color: var(--surface);
  color: var(--text);
}

.dark-theme figure,
.dark-theme .type-card,
.dark-theme .swatch {
  background: #1E1E1E;
  border-color: rgba(255, 255, 255, .15);
}

/* =========================
   MERGED PATCH OVERRIDES
   (applied after originals)
   ========================= */

/* Normalize typography & remove excessive text glow for readability */
body { font-size: 1rem; }

h1 {
  /* Single, uniform H1 sizing; remove heavy glow */
  font-size: clamp(1.8rem, 1.1rem + 2.2vw, 2.4rem);
  text-shadow: none;
}

/* Prefer semantic targeting; if you had .nav-top, you can drop it */
header nav {
  display: flex;
  flex-wrap: wrap;
  gap: var(--space-2) var(--space-4);
  justify-content: center;
  margin-top: var(--space-2);
}

/* Use .container to manage inner width in all major regions */
header > .container,
main > .container,
footer > .container {
  display: block;
  padding-inline: var(--space-4);
}

@media (min-width:700px) {
  header > .container {
    display: grid;
    grid-template-columns: 1fr auto;
    align-items: end;
    gap: var(--space-4);
  }
}

/* Figures: remove white halo border, keep consistent max width */
figure {
  margin: var(--space-6) auto;
}
figure img {
  max-width: min(100%, 360px);
  border: 0; /* remove halo */
}

/* Blockquote: align with container and reduce background intensity */
blockquote {
  background: rgba(141, 163, 166, 0.10);
  text-shadow: none;
}

/* Ensure figure/blockquote align with content edges inside container */
main .container > figure,
main .container > blockquote {
  margin-inline: 0;
}

/* Lists: normalize LI spacing for proximity consistency */
ul { padding-left: 1.25rem; }
ul li { margin-block: .35rem; }
ul ul { padding-left: 1.25rem; }

/* Contrast & accessibility: avoid gold text on light backgrounds */
.note-gold {
  color: var(--text); /* readable on light bg */
  font-style: italic;
}

/* Holiday image: avoid gold borders on images if contrast feels heavy */
.figure-holiday img { border: 0; }

/* Holiday links: ensure AA contrast on hover */
.link-festive:hover,
.link-festive:focus { color: #1F4F3A; }

/* Badges: pine background with white text for strong contrast */
.badge-festive {
  background: var(--holiday-pine);
  color: #fff;
  border: 1px solid var(--holiday-gold);
}

/* Remove global text glow from body text areas that impact legibility */
footer p,
footer a,
figure figcaption,
strong,
em,
main a {
  text-shadow: none;
}

/* De-emphasize the .small utility; prefer consistent base body size */
.small { font-size: inherit; opacity: 1; }
